// –î–∞–Ω–Ω—ã–µ –ø–æ —Ç–µ–º–∞–º: —Ç–µ–æ—Ä–∏—è, –≤–∏–¥–µ–æ, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –¥–ª—è —Ç–µ–æ—Ä–∏–∏
const topicsData = {
  proteins: {
    title: "–ë–µ–ª–∫–∏",
    theory: `
      <p class="theory-text">–ß—Ç–æ —Ç–∞–∫–æ–µ –±–µ–ª–∫–∏?
–ë–µ–ª–∫–∏ ‚Äî —ç—Ç–æ –∫—Ä—É–ø–Ω—ã–µ –±–∏–æ–ø–æ–ª–∏–º–µ—Ä—ã, —Å–æ—Å—Ç–æ—è—â–∏–µ –∏–∑ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–µ–ø—Ç–∏–¥–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏. –û–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –º–æ–ª–µ–∫—É–ª–∞–º–∏ –∂–∏–≤—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–º–æ–≤.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–µ–ª–∫–æ–≤:

–ü–µ—Ä–≤–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç –≤ –ø–æ–ª–∏–ø–µ–ø—Ç–∏–¥–Ω–æ–π —Ü–µ–ø–∏.

–í—Ç–æ—Ä–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ–µ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–∏–µ —Ü–µ–ø–∏ (Œ±-—Å–ø–∏—Ä–∞–ª—å, Œ≤-—Å–ª–æ–π).

–¢—Ä–µ—Ç–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî —Ç—Ä–µ—Ö–º–µ—Ä–Ω–∞—è —Ñ–æ—Ä–º–∞ –±–µ–ª–∫–∞, —Å–ª–æ–∂–Ω–æ–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ.

–ß–µ—Ç–≤–µ—Ä—Ç–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª–∏–ø–µ–ø—Ç–∏–¥–Ω—ã—Ö —Ü–µ–ø–µ–π.

–§—É–Ω–∫—Ü–∏–∏ –±–µ–ª–∫–æ–≤:

–ö–∞—Ç–∞–ª–∏–∑ —Ä–µ–∞–∫—Ü–∏–π (—Ñ–µ—Ä–º–µ–Ω—Ç—ã)

–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤–µ—â–µ—Å—Ç–≤ (–≥–µ–º–æ–≥–ª–æ–±–∏–Ω)

–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è (–∫–æ–ª–ª–∞–≥–µ–Ω)

–ó–∞—â–∏—Ç–Ω–∞—è (–∞–Ω—Ç–∏—Ç–µ–ª–∞)

–†–µ–≥—É–ª—è—Ç–æ—Ä–Ω–∞—è (–≥–æ—Ä–º–æ–Ω—ã)

</p>
      <div class="theory-images-container">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQHAoQy3JfM-s347cTYS4d-ViEHCSd-gR1Cfg&s" alt="–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–µ–ª–∫–∞" />
        <img src="https://upload.wikimedia.org/wikipedia/commons/e/ec/Alpha_helix_neg60_neg45_sideview.png" alt="–ê–ª—å—Ñ–∞-—Å–ø–∏—Ä–∞–ª—å" />
      </div>
    `,
    video: `<iframe src="https://www.youtube.com/embed/YVtPQoXX88M?si=A9HZ-mJbebu26YVV" title="–í–∏–¥–µ–æ –æ –±–µ–ª–∫–∞—Ö" frameborder="0" allowfullscreen></iframe>`
  },
  equilibrium: {
    title: "–•–∏–º–∏—á–µ—Å–∫–æ–µ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ",
    theory: `
      <p class="theory-text">–ß—Ç–æ —Ç–∞–∫–æ–µ —Ö–∏–º–∏—á–µ—Å–∫–æ–µ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ?
–≠—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø—Ä—è–º–æ–π –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–π —Ä–∞–≤–Ω—ã, –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –≤–µ—â–µ—Å—Ç–≤ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏.

–ü—Ä–∏–Ω—Ü–∏–ø –õ–µ –®–∞—Ç–µ–ª—å–µ:
–ï—Å–ª–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É –≤ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –¥–∞–≤–ª–µ–Ω–∏—è –∏–ª–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏, —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ —Å–º–µ—Å—Ç–∏—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω—É, –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â—É—é —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ.


–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è (K):
ùêæ
=
[
–ø—Ä–æ–¥—É–∫—Ç—ã
]
ùëö
[
—Ä–µ–∞–≥–µ–Ω—Ç—ã
]
ùëõ
K= 
[—Ä–µ–∞–≥–µ–Ω—Ç—ã] 
n
 
[–ø—Ä–æ–¥—É–∫—Ç—ã] 
m
 
‚Äã
 , –≥–¥–µ —Å—Ç–µ–ø–µ–Ω–∏ ‚Äî —Å—Ç–µ—Ö–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã.

ùêæ
>
1
K>1 ‚Äî —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ —Å–º–µ—â–µ–Ω–æ –∫ –ø—Ä–æ–¥—É–∫—Ç–∞–º.

ùêæ
<
1
K<1 ‚Äî —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ —Å–º–µ—â–µ–Ω–æ –∫ —Ä–µ–∞–≥–µ–Ω—Ç–∞–º.</p>
      <div class="theory-images-container">
        <img src="https://lh6.googleusercontent.com/proxy/pqWBFU8bc4m_IHX7BXyhVYe-QnJ7RzFjf07kcwNGKgj4KQPkyNro0EuToZB9Xhu3lfDDEA" alt="–•–∏–º–∏—á–µ—Å–∫–æ–µ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ" />
        <img src="https://cloudfront.jove.com/files/media/science-education/science-education-thumbs/11392.jpg" alt="–ü—Ä–∏–Ω—Ü–∏–ø –õ–µ –®–∞—Ç–µ–ª—å–µ" />
      </div>
    `,
    video: `<iframe src="https://www.youtube.com/embed/d8p5wBNVUm4?si=6pQf7w8Jj42IMMBf" title="–í–∏–¥–µ–æ –æ —Ö–∏–º–∏—á–µ—Å–∫–æ–º —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–∏" frameborder="0" allowfullscreen></iframe>`
  },
  redox: {
    title: "–û–∫–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏",
    theory: `
      <p class="theory-text">–ß—Ç–æ —Ç–∞–∫–æ–µ –û–í–†?
–†–µ–∞–∫—Ü–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–Ω–æ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–æ–≤ –º–µ–∂–¥—É –≤–µ—â–µ—Å—Ç–≤–∞–º–∏: –æ–¥–Ω–æ –≤–µ—â–µ—Å—Ç–≤–æ —Ç–µ—Ä—è–µ—Ç —ç–ª–µ–∫—Ç—Ä–æ–Ω—ã (–æ–∫–∏—Å–ª—è–µ—Ç—Å—è), –¥—Ä—É–≥–æ–µ ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç (–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è).

–û–∫–∏—Å–ª–∏—Ç–µ–ª—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å:

–û–∫–∏—Å–ª–∏—Ç–µ–ª—å ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç–ª–µ–∫—Ç—Ä–æ–Ω—ã.

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å ‚Äî –æ—Ç–¥–∞—ë—Ç —ç–ª–µ–∫—Ç—Ä–æ–Ω—ã.


–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–∫—Ü–∏–∏:
Z
n
+
C
u
2
+
‚Üí
Z
n
2
+
+
C
u
Zn+Cu 
2+
 ‚ÜíZn 
2+
 +Cu

Zn –æ–∫–∏—Å–ª—è–µ—Ç—Å—è (—Ç–µ—Ä—è–µ—Ç 2e‚Åª)

Cu^{2+} –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç 2e‚Åª)


–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

–ë–∏–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞ (–¥—ã—Ö–∞–Ω–∏–µ –∫–ª–µ—Ç–æ–∫)


–ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è


–ö–æ—Ä—Ä–æ–∑–∏—è </p>
      <div class="theory-images-container">
        <img src="https://lh5.googleusercontent.com/Goy78PZmdGwBqhsIydqSWoWTBoidMJBI-Tfu08deAJ0v8R1xNGAGizcxgxIgcMht0VrxS3qDWAcuOSNT89KEFJAJHYG3aI1TR5l1MobNa2WZjHCmADqCAX3ydylG_srMZSfqqVsuUrbCt53Dj5xjOMQ" alt="–û–í–†" />
        <img src="https://s3.studwork.ru/reference_page/galvanicheskie-elementy-e9c7c80440157d450e3aee97827d34fc.png" alt="–≠–ª–µ–∫—Ç—Ä–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç" />
      </div>
    `,
    video: `<iframe src="https://www.youtube.com/embed/_BpW31pcuOo?si=jhxfeac-5D7EI2vw" title="–í–∏–¥–µ–æ –æ–± –æ–∫–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏—è—Ö" frameborder="0" allowfullscreen></iframe>`
  }
};

const homePage = document.getElementById("home-page");
const topicPage = document.getElementById("topic-page");
const topicTitle = document.getElementById("topic-title");
const tabTheory = document.getElementById("tab-theory");
const tabVideo = document.getElementById("tab-video");
const tabChat = document.getElementById("tab-chat");
const chatMessages = document.getElementById("chat-messages");
const chatInput = document.getElementById("chat-input");
const chatSendBtn = document.getElementById("chat-send-btn");
const btnBackHome = document.getElementById("btn-back-home");
const topicTabs = document.querySelectorAll(".topic-tab-btn");

let currentTopic = null;

// –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏
function openTopic(topicKey) {
  currentTopic = topicKey;
  topicTitle.textContent = topicsData[topicKey].title;
  tabTheory.innerHTML = topicsData[topicKey].theory;
  tabVideo.innerHTML = topicsData[topicKey].video;
  chatMessages.innerHTML = '';
  chatInput.value = '';

  // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤–∫–ª–∞–¥–∫–∏ –Ω–∞ "–¢–µ–æ—Ä–∏—è"
  setActiveTab('tab-theory');

  homePage.classList.add("hidden");
  topicPage.classList.remove("hidden");
}

// –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
btnBackHome.addEventListener("click", () => {
  homePage.classList.remove("hidden");
  topicPage.classList.add("hidden");
  currentTopic = null;
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫ "–ü–µ—Ä–µ–π—Ç–∏" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
document.querySelectorAll(".btn-open-topic").forEach(btn => {
  btn.addEventListener("click", () => {
    const topicKey = btn.closest(".topic-card").dataset.topic;
    openTopic(topicKey);
  });
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ —Ç–µ–º—ã
topicTabs.forEach(tabBtn => {
  tabBtn.addEventListener("click", () => {
    setActiveTab(tabBtn.dataset.tab);
  });
});

function setActiveTab(tabId) {
  topicTabs.forEach(btn => {
    btn.classList.toggle("active", btn.dataset.tab === tabId);
  });

  tabTheory.classList.toggle("active", tabId === "tab-theory");
  tabVideo.classList.toggle("active", tabId === "tab-video");
  tabChat.classList.toggle("active", tabId === "tab-chat");
}

// –õ–æ–≥–∏–∫–∞ —á–∞—Ç-–±–æ—Ç–∞: –ø—Ä–æ—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
function getChatBotAnswer(message, topic) {
  const msg = message.toLowerCase();

  if (!topic) return "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É.";

  if (topic === "proteins") {
    if (msg.includes("—á—Ç–æ —Ç–∞–∫–æ–µ –±–µ–ª–∫–∏")) return "–ë–µ–ª–∫–∏ ‚Äî —ç—Ç–æ –º–∞–∫—Ä–æ–º–æ–ª–µ–∫—É–ª—ã, —Å–æ—Å—Ç–æ—è—â–∏–µ –∏–∑ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç, –≤–∞–∂–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–π –∫–ª–µ—Ç–æ–∫.";
    if (msg.includes("—Ñ—É–Ω–∫—Ü–∏–∏")) return "–ë–µ–ª–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ, —Ñ–µ—Ä–º–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã–µ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –∏ –∑–∞—â–∏—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.";
  }

  if (topic === "equilibrium") {
    if (msg.includes("—Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ")) return "–•–∏–º–∏—á–µ—Å–∫–æ–µ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ–≥–¥–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä—è–º–æ–π –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–π —Ä–∞–≤–Ω—ã.";
    if (msg.includes("–ø—Ä–∏–Ω—Ü–∏–ø –ª–µ —à–∞—Ç–µ–ª—å–µ")) return "–ü—Ä–∏–Ω—Ü–∏–ø –õ–µ –®–∞—Ç–µ–ª—å–µ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Å–º–µ—â–∞–µ—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω—É —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è.";
  }

  if (topic === "redox") {
    if (msg.includes("–æ–∫–∏—Å–ª–µ–Ω–∏–µ")) return "–û–∫–∏—Å–ª–µ–Ω–∏–µ ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –ø–æ—Ç–µ—Ä–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–æ–≤.";
    if (msg.includes("–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ")) return "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–æ–≤.";
  }

  return "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –º–æ–≥—É –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å.";
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
chatSendBtn.addEventListener("click", () => {
  const message = chatInput.value.trim();
  if (message === "") return;

  const userMessageElem = document.createElement("div");
  userMessageElem.classList.add("chat-message", "user-message");
  userMessageElem.textContent = message;
  chatMessages.appendChild(userMessageElem);

  // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ "–¥—É–º–∞–Ω–∏—è" –±–æ—Ç–∞
  setTimeout(() => {
    const botAnswer = getChatBotAnswer(message, currentTopic);
    const botMessageElem = document.createElement("div");
    botMessageElem.classList.add("chat-message", "bot-message");
    botMessageElem.textContent = botAnswer;
    chatMessages.appendChild(botMessageElem);

    chatMessages.scrollTop = chatMessages.scrollHeight;
  }, 500);

  chatInput.value = "";
  chatMessages.scrollTop = chatMessages.scrollHeight;
});

// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter
chatInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    chatSendBtn.click();
  }
});
